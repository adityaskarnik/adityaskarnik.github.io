<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <title>Web ChatBot with Rasa API - Aditya Karnik</title>
    <!-- SEO Meta Tags-->
    <meta name="description" content="Web ChatBot for sending messages via API call using Rasa Framework; Web ChatBot">
    <meta name="keywords" content="chatbot, rasa, api call, bot, web chatbot, profile, landing page, portfolio, name, homepage, resume,">
    <meta name="author" content="Aditya Karnik">
    <!-- Viewport-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Font Ubuntu -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300&display=swap" rel="stylesheet preload prefetch" as="font">
    <link href="../assets/font/Marvelous-Script-Demo.otf" rel="stylesheet preload prefetch" as="font">
    <link rel="preload"
    as="style"
    onload="this.rel = 'stylesheet'" href="../assets/font/font-awesome.min.css">
    <link rel="preload"
    as="style"
    onload="this.rel = 'stylesheet'" href="../assets/font/font-awesome.css">
    <!-- Favicon and Touch Icons-->
    <link rel="apple-touch-icon" sizes="57x57" href="../assets/images/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="../assets/images/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="../assets/images/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="../assets/images/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="../assets/images/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="../assets/images/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="../assets/images/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="../assets/images/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../assets/images/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="../assets/images/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../assets/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="../assets/images/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../assets/images/favicon-16x16.png">
    <link rel="manifest" href="../assets/images/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <link rel="manifest" href="../assets/images/logo/site.webmanifest">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <style>
        @font-face {
            font-family: Marvelous-Script-Demo;
            font-display: swap;
            src:url("..\\assets\\font\\Marvelous-Script-Demo.otf");
        }
        .logo-text {
            font-family: Marvelous-Script-Demo;
            font-size: 320%;
            width: 100%;
            height: auto;
            text-align: center;
            color: #ffc602;
            font-display: swap;
        }
        * {
            font-family: 'Ubuntu', sans-serif;
            font-display: swap;
        }
        body {
            font-family: 'Ubuntu', sans-serif;
            font-display: swap;
        }
        .cs-page-loading {
            position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            -webkit-transition: all .4s .2s ease-in-out;
            transition: all .4s .2s ease-in-out;
            background-color: #fff;
            opacity: 0;
            visibility: hidden;
            z-index: 9999;
        }
        .cs-page-loading.active {
            opacity: 1;
            visibility: visible;
        }
        .cs-page-loading-inner {
            position: absolute;
            top: 50%;
            left: 0;
            width: 100%;
            text-align: center;
            -webkit-transform: translateY(-50%);
            transform: translateY(-50%);
            -webkit-transition: opacity .2s ease-in-out;
            transition: opacity .2s ease-in-out;
            opacity: 0;
        }
        .cs-page-loading.active > .cs-page-loading-inner {
            opacity: 1;
        }
        .cs-page-loading-inner > span {
            display: block;
            font-family: 'Ubuntu', sans-serif;
            font-size: 1rem;
            font-weight: normal;
            color: #737491;
            font-display: swap;
        }
        .cs-page-spinner {
            display: inline-block;
            width: 2.75rem;
            height: 2.75rem;
            margin-bottom: .75rem;
            vertical-align: text-bottom;
            border: .15em solid #766df4;
            border-right-color: transparent;
            border-radius: 50%;
            -webkit-animation: spinner .75s linear infinite;
            animation: spinner .75s linear infinite;
        }
        @-webkit-keyframes spinner {
            100% {
            -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
            }
        }
        @keyframes spinner {
            100% {
            -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
            }
        }
        iframe {
            overflow:hidden;
        }
        code {
            font-family: 'Ubuntu', sans-serif;
            font-display: swap;
        }
        pre {
            font-family: 'Ubuntu', sans-serif;
            font-display: swap;
        }
    </style>
    <script defer src="https://use.fontawesome.com/449fc92c63.js"></script>
    <!-- Vendor Styles-->
    <link rel="stylesheet" media="screen" href="../assets/css/simplebar.min.css">
    <link rel="stylesheet" media="screen" href="../assets/css/tiny-slider.css">
    <link rel="stylesheet" media="screen" href="../assets/css/lightgallery.min.css">
    <!-- Main Theme Styles + Bootstrap-->
    <link rel="stylesheet" media="screen" href="../assets/css/theme.min.css">
    <script defer src="../assets/js/run_prettify.js?lang=py&amp;skin=sunburst"></script>
    <!-- Google analytics -->
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <!-- Global site tag (gtag.js) - Google Ads: 942098851 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-942098851"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'AW-942098851');
    </script>
    <!-- Event snippet for Website traffic conversion page -->
    <script>
      gtag('event', 'conversion', {'send_to': 'AW-942098851/xQJACJqMsO0BEKOTncED'});
    </script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-173927461-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-173927461-1');
    </script>

  </head>
  <!-- Body-->
  <body>
      <!-- Global site tag (gtag) - Google Ads: 942098851 --> <amp-analytics type="gtag" data-credentials="include"> <script type="application/json"> { "vars": { "gtag_id": "AW-942098851", "config": { "AW-942098851": { "groups": "default" } } }, "triggers": { "C_JVmPciA7KpY": { "on": "visible", "vars": { "event_name": "conversion", "send_to": ["AW-942098851/xQJACJqMsO0BEKOTncED"] } }} } </script> </amp-analytics>
    <!-- Page loading spinner-->
    <main class="cs-page-wrapper">
        <!-- Navbar Floating light for Index page only-->
        <!-- Remove "navbar-sticky" class to make navigation bar scrollable with the page.-->
        <header class="cs-header navbar navbar-expand-lg navbar-light bg-light navbar-box-shadow navbar-sticky" data-scroll-header="">
            <div class="container px-0 px-xl-3">
                <button class="navbar-toggler ml-n2 mr-2" type="button" data-toggle="offcanvas" data-offcanvas-id="primaryMenu">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <a class="navbar-brand order-lg-1 mx-auto ml-lg-0 pr-lg-2 mr-lg-4" href="/">
                <img class="d-none d-lg-block" width="153" src="../assets/images/logo-dark.png" alt="aditya karnik">
                <img class="d-lg-none" width="58" src="../assets/images/logo-icon.png" alt="aditya karnik">
                <div class="d-flex align-items-center order-lg-3 ml-lg-auto">
                    <a class="btn btn-primary ml-grid-gutter d-none d-lg-inline-block" href="https://github.com/adityaskarnik" target="_blank" rel="noopener">
                    <i class="fa fa-github" aria-hidden="true"></i> View <span class="d-none d-lg-inline">Profile</span>
                    </a>
                </div>
                <div class="cs-offcanvas-collapse order-lg-2" id="primaryMenu">
                    <div class="cs-offcanvas-cap navbar-box-shadow">
                        <h5 class="mt-1 mb-0">Menu</h5>
                        <button class="close lead" type="button" data-toggle="offcanvas" data-offcanvas-id="primaryMenu"><span aria-hidden="true">×</span></button>
                    </div>
                    <div class="cs-offcanvas-body">
                        <!-- Menu-->
                        <ul class="navbar-nav">
                            <li class="nav-item dropdown dropdown-mega"><a class="nav-link dropdown-toggle" href="/" >Home</a></li>
                            <li class="nav-item dropdown dropdown-mega active"><a class="nav-link dropdown-toggle" href="/blog">Blog</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </header>
        <!-- Page content-->
        <section class="container">
            <h1 class="h1 pt-4 pt-md-5 mt-2">Web ChatBot using Rasa API</h1>
            <div class="d-sm-flex alitgn-itams-center pt-3 font-size-sm">
                <div class="d-flex align-items-center mb-3">
                    <div class="text-nowrap text-muted mr-3"><i class="fa fa-calendar mr-1"></i><span>Jun 13, 2020</span></div>
                    <div class="text-nowrap text-muted"><i class="fa fa-tag mr-1"></i><span>Python Titbits</span></div>
                </div>
                <div class="col-md-10 order-md-2 text-md-right mb-3">
                    <ul class="list-inline font-size-sm mb-0">
                        <a class="social-btn sb-outline sb-facebook mr-2 my-2" href="https://www.facebook.com/sharer/sharer.php?u=https://adityakarnik.com/blog/chatbot">
                            <i class="fa fa-facebook"></i>
                        </a>
                        <a class="social-btn sb-outline sb-twitter mr-2 my-2" href="https://twitter.com/home?status=https://adityakarnik.com/blog/chatbot">
                            <i class="fa fa-twitter"></i>
                        </a>
                        <a class="social-btn sb-outline sb-google mr-2 my-2" href="https://www.linkedin.com/shareArticle?mini=true&url=https://adityakarnik.com/blog/chatbot&title=&summary=&source=">
                            <i class="fa fa-linkedin"></i>
                        </a>
                        <a class="social-btn sb-outline sb-pinterest mr-2 my-2" href="https://pinterest.com/pin/create/button/?url=https://adityakarnik.com/blog/chatbot&media=&description=">
                            <i class="fa fa-pinterest"></i>
                        </a>
                        <a class="social-btn sb-outline sb-whatsapp my-2" href="whatsapp://send?text=https://adityakarnik.com/blog/chatbot" data-action="share/whatsapp/share">
                            <i class="fa fa-whatsapp"></i>
                        </a>
                    </ul>
                  </div>
            </div>
        </section>
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8 cs-content pt-5 pt-lg-5 order-lg-2">
                    <h5>Say Hi</h5>
                    <p class="py-1 font-size-lg mb-4 pb-2">
                        Start your conversation with a Hi, always. The chatbot, once initialized, understands very basic gestures - figuratively.
                    </p>
                    <p class="py-1 font-size-lg mb-4 pb-2">In this tutorial, you will learn how to train a basic model and start a conversation with the chatbot using Rasa, some HTML and Chatroom.js. A web application interface, that will help communication with the bot feel more friendly.</p>
                    <p class="py-1 font-size-lg mb-4 pb-2">What are we going to use:</p>
                    <ol>
                        <li>Rasa Framework</li>
                        <li><a target="_blank" rel="noopener" href="https://github.com/scalableminds/chatroom">Chatroom.js component</a> a little bit of addition</li>
                    </ol>
                    <p class="py-1 font-size-lg mb-4 pb-2">What we need - Prerequisites: </p>
                    <ol>
                        <li>Python - Obviously. This tutorial uses Python-3.7, you can use any other version of your choice.</li>
                        <li>HTML - A basic html page of your choice. <a target="_blank" rel="noopener" href="https://github.com/adityaskarnik/chatbot/blob/master/home.html">You can use my html page, if you don't already have one.</a> This one already has Chatroom in it, which I will be later explaining.</li>
                        <li>Package - <code style="font-family: Ubuntu;">Virtualenv</code> - This is always recommended when working on multiple version of packages as it should not break your python project already setup for another version.</li>
                    </ol>
                    <p class="py-1 font-size-lg mb-4 pb-2">Without wasting anymore time, lets dive in.</p>
                </div>
                <div class="col-lg-4 cs-sidebar pt-2 pt-lg-5 pb-lg-5 order-lg-1">
                    <!-- <img class="rounded" src="../assets/images/chatbot_demo.gif" alt="chatbot_demo"/> -->
                    <video autoplay loop>
                        <source src="../assets/video/chatbot_demo.webm" type="video/webm">
                     </video>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-lg-9 py-4 mb-2 mb-sm-0 pb-sm-5">
                    <h5>Introduction</h5>
                    <p class="py-1 font-size-lg mb-4 pb-2">You might feel the need to get in touch with your users more quickly or say, you need to provide best customer service, automating responses. Your reasons can be different but to achieve this with less efforts, you need the right tool.</p>
                    <p class="py-1 font-size-lg mb-4 pb-2">Heres a report from <a target="_blank" rel="noopener" href="https://drift.com/">Drift</a> which show what are the most targeted application of ChatBots</p>
                    <img class="rounded" src="../assets/images/chatbots-report-use-cases.jpeg"/>
                    <p class="py-1 font-size-lg mt-5 mb-4 pb-2">To achieve this, there are multiple providers which can give you the same result. In the tutorial we will be using <a target="_blank" rel="noopener" href="https://rasa.com/">Rasa</a>. As Rasa is an open source framework and with a great support community, it stands strong.</p>
                    <p class="py-1 font-size-lg mt-5 mb-4 pb-2">Let us quickly setup Rasa.</p>
                    <h5>Installation</h5>
                    <p>Considering you have python, pip already installed follow these steps. If you do not have python installed, <a target="_blank" rel="noopener" href="https://www.python.org/downloads/">Visit here download and install it.</a></p>
                    <p>First setup virtual environment:</p>
                    <code class="row cs-sidebar col-lg-9 py-3 mb-2 mb-sm-3 pb-sm-3 rounded" style="font-family: Ubuntu;">virtualenv venv</code>
                    <p>Next, activate virtual environment:</p>
                    <code class="row cs-sidebar col-lg-9 py-3 mb-2 mb-sm-3 pb-sm-3 rounded" style="font-family: Ubuntu;">source venv/bin/activate # For Linux</code>
                    <code class="row cs-sidebar col-lg-9 py-3 mb-2 mb-sm-3 pb-sm-3 rounded" style="font-family: Ubuntu;">.\venv\Scripts\activate # For Windows</code>
                    <p>Install rasa:</p>
                    <code class="row cs-sidebar col-lg-9 py-3 mb-2 mb-sm-3 pb-sm-3 rounded" style="font-family: Ubuntu;">pip install rasa</code>
                    <p>Install rasa x:</p>
                    <code class="row cs-sidebar col-lg-9 py-3 mb-2 mb-sm-3 pb-sm-3 rounded" style="font-family: Ubuntu;">pip install rasa-x --extra-index-url https://pypi.rasa.com/simple</code>
                    <p class="py-1 font-size-lg mb-4 pb-2">Here we complete the installation for the chatbot. Now lets create a project and further continue the quest</p>
                    <p>Start project:</p>
                    <code class="row cs-sidebar col-lg-9 py-3 mb-2 mb-sm-3 pb-sm-3 rounded" style="font-family: Ubuntu;">rasa init --no-prompt</code>
                    <h5>File Structure</h5>
                    <p class="py-1 font-size-lg mb-4 pb-2">In your present working directory (pwd) you now see a lot of files and directory that the command has created. Let us briefly go through each of them</p>
                    <div class="row justify-content-center">
                        <div class="col-lg-8 cs-content pt-5 pt-lg-5 order-lg-2">
                            <code style="font-family: Ubuntu;">\actions\actions.py</code> <p>This file represents the custom action or responses you which to send whenever you want to compute or fetch data from elsewhere. We will look into this in detail later.</p>
                            <code style="font-family: Ubuntu;">\config.yml</code> <p>The config file defines what your model should have as components and policy to predict the users input. Right now we will use the file as is.</p>
                            <code style="font-family: Ubuntu;">\credentials.yml</code> <p>When you need to integrate external applications with your chatbot, such as, Microsoft Teams, Slack, Facebook Messenger, Telegram, etc. you need to add the secret key and id in this file.</p>
                            <code style="font-family: Ubuntu;">\data\nlu.yml</code> or <code style="font-family: Ubuntu;">\data\nlu.md</code> - 
                            <p>Depending on the version of Rasa, you will get the different set of file, in older version .md file was used. In the newer version it is changed to .yml.
                                This file contains the values to be mapped to the key. Take for example: if you say <code style="font-family: Ubuntu;">Good morning</code> the prediction will try and change similar words defined in this file and map the key, which in this case is <code style="font-family: Ubuntu;">greet</code>. In terms of chatbot it is an <b>intent</b>
                                <br>Similarly, each intent should have one set of statement to understand the user input</p>
                            <code style="font-family: Ubuntu;">\data\rules.yml</code><p>Rules file was later integrated in Rasa to 2.x version. This is to generalize a conversation which the bot does not already have a response for.</p>
                            <code style="font-family: Ubuntu;">\data\stories.yml</code><p>Stories are predefined steps a must follow to interact with the user. A story contains Action and Intent. Actions are responses the bot send as messages, while Intents are set of statements which the user messages have.</p>
                            <code style="font-family: Ubuntu;">\domain.yml</code> <p>Domain includes a list of all the intents, entities, slots, actions, and forms that the assistant knows about.</p>
                            <code style="font-family: Ubuntu;">\models</code> <p>Models contain the zip file of the NLU data, configuration and components you define in the data files.<br>The command <code style="font-family: Ubuntu;">rasa train</code> creates the zip files for you.</p>
                        </div>
                        <div class="col-lg-4 cs-sidebar pt-2 pt-lg-5 pb-lg-5 order-lg-1">
                            <img class="rounded" src="../assets/images/figure_rasa_file_structure.PNG" alt="rasa_file_structure"/>
                        </div>
                    </div>
                    <p class="py-1 font-size-lg mb-4 mt-4 pb-2">While the command <code style="font-family: Ubuntu;">rasa init</code> was being executed, you could see some thing like this:</p>
                    <img class="rounded" src="../assets/images/figure_nlu_model.JPG"/>
                    <p class="py-1 font-size-lg mb-4 mt-4 pb-2">Let us understand what it does.<br>By default rasa has defined a basic set of intents, actions, story. This here is the model creation that we saw earlier in the <code style="font-family: Ubuntu;">\models</code> folder. It will create a zip file of all the set of constrains in <code style="font-family: Ubuntu;">\data</code></p>
                    <p class="py-1 font-size-lg mb-4 mt-4 pb-2">As soon as the command completes its execution, it will show you, to run the <code style="font-family: Ubuntu;">rasa shell</code> command and start conversation. Which means you ready to roll.</p>
                    <p class="py-1 font-size-lg mb-4 mt-4 pb-2">By Default rasa creates a file with the current <code style="font-family: Ubuntu;"><__timestamp__>.zip</code> file. If you wish you to change the path, that you can run the rasa train command with arguments <code style="font-family: Ubuntu;">--out</code>.<br>You can add <code style="font-family: Ubuntu;">--fixed-model-name</code> to name the model.<br>It will either choose core or nlu data, unless specified.</p>
                    <h5>APIs</h5>
                    <p class="py-1 font-size-lg mb-4 mt-4 pt-2 pb-2">To create channel for communicating with the ChatBot Server, you can create a HTTP API. You can send and receive messages over this API and train models.</p>
                    <p class="py-1 font-size-lg mb-4 mt-4 pt-2 pb-2">API endpoints are not enabled by default. Endpoints are defined in the file <code style="font-family: Ubuntu;">credentials.yml</code> and they are exposed webhook/rest/webhook</p>
                    <code class="row cs-sidebar col-lg-9 py-3 mb-2 mb-sm-3 pb-sm-3 rounded" style="font-family: Ubuntu;">rest:<br>
                        # you don't need to provide anything here - this channel doesn't<br>
                        # require any credentials
                    </code>
                    <p class="py-1 font-size-lg mb-4 mt-4 pt-2 pb-2">To enable lets fire up the rocket, Run the following commands to start the chat api:</p>
                    <code class="row cs-sidebar col-lg-9 py-3 mb-2 mb-sm-3 pb-sm-3 rounded" style="font-family: Ubuntu;">rasa run actions -vv</code>
                    <p>Command starts the action server, where your custom actions are ready to respond</p>
                    <code class="row cs-sidebar col-lg-9 py-3 mb-2 mb-sm-3 pb-sm-3 rounded" style="font-family: Ubuntu;">rasa run -m models --enable-api --cors "*" -p 5021</code>
                    <p>Command starts api with latest model file.</p>
                    <p>Notice the <code style="font-family: Ubuntu;">--cors</code>. This will let you communicate over different server. If not you can only send and receive messages on the same server as rasa.<br>The <code style="font-family: Ubuntu;">"*"</code> opens for all servers. You can specify a single server ip address.</p>
                    <p class="mb-4 pb-2"><code style="font-family: Ubuntu;">-p</code> Lets you define what port number you want to expose the api. This in my case where my server is already allowed communication over 5021</p>
                    <p class="py-1 font-size-lg mb-4 mt-4 pt-2 pb-2">Lets understand the actions.py file for which the above two commands have been used.</p>
                    <pre class="prettyprint" style="font-family: Ubuntu;">from typing import Any, Text, Dict, List

from rasa_sdk import Action, Tracker
from rasa_sdk.executor import CollectingDispatcher


class ActionHelloWorld(Action):

    def name(self) -> Text:
        return "action_hello_world"

    def run(self, dispatcher: CollectingDispatcher,
            tracker: Tracker,
            domain: Dict[Text, Any]) -> List[Dict[Text, Any]]:

        dispatcher.utter_message(text="Hello World!")

        return []
    
class FetchFromDatabase(Action):

def name(self) -> Text:
    return "fetch_location_restaurants"

def run(self, dispatcher: CollectingDispatcher,
        tracker: Tracker,
        domain: Dict[Text, Any]) -> List[Dict[Text, Any]]:

        restaurant = str((tracker.latest_message)['text']).split("Provide me Menu of")[1].strip()
        import sqlite3
        conn = sqlite3.connect('hotel.db')
        data = conn.execute("SELECT FOOD_ITEM, PRICE, IMAGE FROM HOTEL_INFO WHERE RESTAURANTS='" + restaurant +"'")
        for i in data:
            dispatcher.utter_message(text=str(i[0] + ", " + i[1]), image=i[2])

        return []</code></pre>
                    <ol>
                        <li>Here at the beginning of the code you can see some import statements, these are normal rasa packages that are required</li>
                        <li>The class name can be anything you wish to define</li>
                        <li>Next important thing is the name of the function, <code class="row cs-sidebar col-lg-9 py-3 mb-2 mb-sm-3 pb-sm-3 rounded" style="font-family: Ubuntu;">action_hello_world</code> This is a custom function name for your custom action that you need to define in the <code style="font-family: Ubuntu;">domain.yml </code>file. In the story you create, when it requires to send a response message it will try to search in the actions.py file and perform its operation.</li>
                        <li>In the default <code style="font-family: Ubuntu;">run</code> function you need to add your code and compute your response to be dispatched.</li>
                        <li>With the tracker argument you can fetch all the latest messages, the intent, the slot and more. This will be helpful in understanding the previous message and what action needs to be taken accordingly.
                            <ul>
                                <li><code style="font-family: Ubuntu;">tracker.latest_message.get("text")</code> will provide the string of last bot or user messages.</li>
                                <li><code style="font-family: Ubuntu;">tracker.events</code> give the entire conversation.</li>
                                <li><code style="font-family: Ubuntu;">tracker.sender_id</code> contains the unique id created for the conversation.</li>
                                <li><pre class="prettyprint"><code style="font-family: Ubuntu;">for event in (list(reversed(tracker.events))):<br>    if event.get("event") == "user":    # change 'user' to 'bot' for message responses of only the chat server<br>        last_messages.append(event.get("text"))<br>        print("Messages", last_messages)</code></pre>
                                These line will get you the message input by the user, similarly you can get all the messages of the bot using the <code style="font-family: Ubuntu;">event.get("event") == "bot"</code> statement.</li>
                            </ul>
                        </li>
                        <li>The second class <code style="font-family: Ubuntu;">FetchFromDatabase</code> is from our working example where depending in the selection we are fetching from the database the details of the restaurant.</li>
                        <li>The last and the final statement <code style="font-family: Ubuntu;">dispatcher.utter_message()</code> will send a response via the API to the user. This function takes input of text and image, as shown in the example. A valid image path is expected.</li>
                    </ol>
                    <h5>Chat UI</h5>
                    <p class="py-1 font-size-lg mb-4 mt-4 pt-2 pb-2">Now that your chat api is exposed and open for messages, lets get to the last part to display the chat window and interact with Rasa server.</p>
                    <p class="py-1 font-size-lg mb-4 mt-4 pt-2 pb-2">For this you need to get a copy of the Chatroom.js and Chatroom.css from the creator's <a target="_blank" rel="noopener" href="https://github.com/scalableminds/chatroom">GitHub page</a>.</p>
                    <p class="py-1 font-size-lg mb-4 mt-4 pt-2 pb-2">Also you need an HTML page where you will embed the Chatroom to configure it and connect to your Rasa Server. Grab a copy for the file <a target="_blank" rel="noopener" href="https://github.com/adityaskarnik/chatbot/blob/master/home.html">here</a>.<br>Now lets understand what have we got here and what you might need to modify.</p>
                    <div class="cs-gallery">
                        <a href="../assets/images/figure_rasa_html_code.png" class="cs-gallery-item rounded-lg" data-sub-html='<h6 class="font-size-sm text-light">HTML Code breakdown</h6>'>
                        <img src="../assets/images/figure_rasa_html_code.png" alt="Gallery thumbnail">
                        <span class="cs-gallery-caption">HTML Code Breakdown - Click to Expand</span>
                        </a>
                    </div>
                    <ol class="py-1 font-size-lg mb-4 mt-4 pt-2 pb-2">
                        <li>Jquery is required for the basic functionality for .js files in the script tag.</li>
                        <li>The <code style="font-family: Ubuntu;">Chatroom.css</code> file is required for the UI of the chat window, the color, the font</li>
                        <li>The <code style="font-family: Ubuntu;">div</code> tag will place the Chat window where you wish it to be embed in the html page</li>
                        <li>The <code style="font-family: Ubuntu;">Chatroom.js</code> file you will need to add to your script tag before calling the chatroom.Window function. This file has the functionality for sending and receiving the messages.</li>
                        <li>The url for the Rasa server where I have previously asked you to start the <code style="font-family: Ubuntu;">rasa run -m models</code> command. Right now where you are running the server will be your local server <code style="font-family: Ubuntu;">localhost</code>. Later in case if you run it on a separate server you will need to add the IP address here.<br>Make sure to expose the port number</li>
                        <li>A default welcome message you wish the chatbot to greet you with.</li>
                        <li>This is an extra functionality added to start sending message on your behalf to your rasa server. The response to this message will be your actual response from the server, with a API call.</li>
                    </ol>
                    <p class="py-1 font-size-lg mb-4 mt-4 pt-2 pb-2">CONGRATULATION!! With this we complete the Rasa ChatBot working and you have your own assistant.</p>
                    <p class="py-1 font-size-lg mb-4 mt-4 pt-2 pb-2">If you wish to get the Source Code of this tutorial. <a target="_blank" rel="noopener" href="https://github.com/adityaskarnik/chatbot/archive/master.zip">Click here</a></p>
                    <p class="py-1 font-size-lg mb-4 mt-4 pt-2 pb-2">Make the most of this and <a target="_blank" rel="noopener" href="#">let me know</a> in case if you have any issues. Also let me know your feedback <a href="/survey" target="_blank" rel="noopener">here</a></p>
                    <h5>Credits</h5>
                    <p class="py-1 font-size-lg mb-4 mt-4 pt-2 pb-2">The restaurants database used in the ChatBot is the idea of <a target="_blank" rel="noopener" href="https://www.linkedin.com/in/ahmed-aqib">Aqib Ahmed</a>.</p>
                    <p class="py-1 font-size-lg mb-4 mt-4 pt-2 pb-2"><a target="_blank" rel="noopener" href="https://rasa.com/docs/rasa/http-api">Rasa's Reference Documentations will give you more details</a></p>
                    <p class="py-1 font-size-lg mb-4 mt-4 pt-2 pb-2">The ChatUI is possible with the help of <a target="_blank" rel="noopener" href="https://github.com/scalableminds/chatroom">Chatroom.js</a></p>
                </div>
            </div>
        </div>
    </main>
    <footer class="cs-footer bg-dark pt-5 pt-md-6">
        <div class="container pt-3 pt-md-0">
          <div class="row pb-3">
            <div class="col-md-4 mt-n2 pb-3 pb-md-0 mb-4"><a class="d-block mb-3" href="/" style="width: 153px;"><img src="../assets/images/logo.png" alt="adityakarnik"></a>
              <a class="social-btn sb-outline sb-twitter sb-light sb-lg mr-2 mb-2" href="https://linkedin.com/in/adityaskarnik" target="_blank" rel="noopener">
                <i class="fa fa-linkedin" aria-hidden="true"></i>
              </a>
              <a class="social-btn sb-outline sb-instagram sb-light sb-lg mr-2 mb-2" href="https://github.com/adityaskarnik" target="_blank" rel="noopener">
                <i class="fa fa-github" aria-hidden="true"></i>
              </a>
              <a class="social-btn sb-outline sb-google sb-light sb-lg mr-2 mb-2" href="https://twitter.com/aditya_karnik" target="_blank" rel="noopener">
                <i class="fa fa-twitter" aria-hidden="true"></i>
              </a>
              <a class="social-btn sb-outline sb-google sb-light sb-lg mr-2 mb-2" href="https://instagram.com/adityakarnik" target="_blank" rel="noopener">
                <i class="fa fa-instagram" aria-hidden="true"></i>
              </a>
              <a class="social-btn sb-outline sb-google sb-light sb-lg mr-2 mb-2" href="mailto:me@adityakarnik.com" target="_blank" rel="noopener">
                <i class="fa fa-envelope" aria-hidden="true"></i>
              </a>
            </div>
          </div>
          <p class="logo-text">“Nothing is as important as passion. No matter what you want to do with your life, be passionate.” —Jon Bon Jovi</p>
          <hr class="border-light">
          <div class="row align-items-center my-3 pt-4">
            <div class="col-md-6 order-md-2 text-md-right mb-3">
              <ul class="list-inline font-size-sm mb-0">
                <li class="list-inline-item"><a class="nav-link-style nav-link-light" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=ZJM97M6KBLHZY" target="_blank" rel="noopener">Donate</a></li>
                <li class="list-inline-item"><a class="nav-link-style nav-link-light" href="/survey" target="_blank" rel="noopener">Survey</a></li>
              </ul>
            </div>
            <div class="col-md-6 order-md-1 mb-3">
              <p class="font-size-sm mb-0"><span class="text-light opacity-50 mr-1">© All rights reserved. Made by</span><a class="nav-link-style nav-link-light" href="https://adityakarnik.com/" target="_blank" rel="noopener">Aditya Karnik</a></p>
            </div>
          </div>
        </div>
      </footer>
      <button class="btn btn-primary btn-sm cs-sidebar-toggle" type="button" data-toggle="offcanvas" data-offcanvas-id="blog-sidebar"><i class="fe-sidebar font-size-base mr-2"></i>Sidebar</button>
    <!-- Back to top button--><a class="btn-scroll-top" href="#top" data-scroll=""><span class="btn-scroll-top-tooltip text-muted font-size-sm mr-2">Top</span><i class="fa fa-arrow-up" aria-hidden="true"></i></a>
    <!-- Vendor scrits: js libraries and plugins-->
    <script>
        window.onload = function () {
            // <link rel="stylesheet" href="../assets/font/font-awesome.min.css">
            // <link rel="stylesheet" href="../assets/font/font-awesome.css">
        }
    </script>
    <script defer src="../assets/js/jquery.slim.min.js"></script>
    <script defer src="../assets/js/bootstrap.bundle.min.js"></script>
    <script defer src="../assets/js/bs-custom-file-input.min.js"></script>
    <script defer src="../assets/js/simplebar.min.js"></script>
    <script defer src="../assets/js/smooth-scroll.polyfills.min.js"></script>
    <script defer src="../assets/js/parallax.min.js"></script>    
    <script defer src="../assets/js/tiny-slider.js"></script>
    <script defer src="../assets/js/lightgallery.min.js"></script>
    <script defer src="../assets/js/lg-video.min.js"></script>
    <script defer src="../assets/js/lg-zoom.min.js"></script>
    <script defer src="../assets/js/lg-fullscreen.min.js"></script>

    <!-- Main theme script-->
    <script defer src="../assets/js/theme.min.js"></script>
    
  </body>
</html>